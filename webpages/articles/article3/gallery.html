<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gallery Viewer</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
    }
    .gallery-container {
      padding: 20px;
    }
    .gallery-item {
      position: relative;
      margin-bottom: 20px;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background-color: white;
    }
    .gallery-item img,
    .gallery-item video {
      width: 100%;
      height: 250px;
      object-fit: cover;
      display: block;
    }
    .gallery-item video {
      height: 300px;
    }
    .gallery-caption {
      padding: 10px;
      text-align: center;
      background-color: #f8f9fa;
    }
    .header {
      background-color: #757575;
      color: white;
      padding: 20px 0;
      text-align: center;
      margin-bottom: 20px;
    }
    #loading {
      text-align: center;
      font-style: italic;
      color: #6c757d;
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Gallery Viewer</h1>
    <p>All images and videos from the gallery folder</p>
  </div>

  <div class="container gallery-container">
    <div id="gallery" class="row"></div>
    <div id="loading">Loading gallery...</div>
  </div>

  <script>
    // List of supported file extensions
    const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'JPEG'];
    const videoExtensions = ['mp4', 'webm', 'ogg'];

    // Fetch and display files from the gallery folder
    async function loadGallery() {
      const galleryElement = document.getElementById('gallery');
      const loadingElement = document.getElementById('loading');

      try {
        // Replace this URL with the path to your gallery folder
        const response = await fetch('gallery/');
        const text = await response.text();

        // Parse the directory listing (this is a simple approach and may not work on all servers)
        const parser = new DOMParser();
        const htmlDoc = parser.parseFromString(text, 'text/html');
        const links = Array.from(htmlDoc.querySelectorAll('a'));

        const files = links
          .map(link => link.getAttribute('href'))
          .filter(href => href && !href.endsWith('/'));

        // Clear loading message
        loadingElement.style.display = 'none';

        // Display each file
        files.forEach(file => {
          const ext = file.split('.').pop().toLowerCase();
          const isImage = imageExtensions.includes(ext);
          const isVideo = videoExtensions.includes(ext);

          if (isImage || isVideo) {
            const col = document.createElement('div');
            col.className = 'col-lg-4 col-md-6 col-sm-12';

            const item = document.createElement('div');
            item.className = 'gallery-item';

            const media = document.createElement(isVideo ? 'video' : 'img');
            media.src = `gallery/${file}`;
            media.controls = isVideo;
            media.alt = file;

            const caption = document.createElement('div');
            caption.className = 'gallery-caption';
            caption.textContent = file;

            item.appendChild(media);
            item.appendChild(caption);
            col.appendChild(item);
            galleryElement.appendChild(col);
          }
        });

      } catch (error) {
        loadingElement.textContent = 'Failed to load gallery. Make sure this page is hosted on a server.';
        console.error('Error loading gallery:', error);
      }
    }

    // Load the gallery when the page loads
    window.onload = loadGallery;
  </script>
</body>
</html>
